{% extends 'base.html' %}

{% block title %}Email Simulation{% endblock %}

{% block content %}
<div class="simulation-container">
    <h1>Email Assessment</h1>
    
    <div class="email-container">
        <div class="email-header">
            <div><strong>From:</strong> {{ email.sender }}</div>
            <div><strong>Subject:</strong> {{ email.subject }}</div>
            <div><strong>Date:</strong> {{ simulation.created_at.strftime('%B %d, %Y %H:%M') }}</div>
        </div>
        
        <div class="email-content">
            {{ email.content | safe }}
        </div>
    </div>
    
    <div class="assessment-form">
        <h2>Is this a phishing email?</h2>
        <form action="{{ url_for('simulation.submit_assessment', simulation_id=simulation.id) }}" method="post">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="phishing" name="is_phishing" value="true" required>
                    <label for="phishing">Yes, this is a phishing email</label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="legitimate" name="is_phishing" value="false" required>
                    <label for="legitimate">No, this is a legitimate email</label>
                </div>
            </div>
            
            <div class="form-group">
                <label for="explanation">Explain your reasoning:</label>
                <textarea id="explanation" name="explanation" rows="4" class="form-control" required></textarea>
                <small class="form-text text-muted">What clues or indicators led to your assessment?</small>
            </div>
            
            <button type="submit" class="btn btn-primary">Submit Assessment</button>
        </form>
    </div>
</div>
{% endblock %}

{% block styles %}
<style>
    .simulation-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }
    
    .email-container {
        background-color: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 30px;
    }
    
    .email-header {
        border-bottom: 1px solid #ddd;
        padding-bottom: 15px;
        margin-bottom: 15px;
    }
    
    .email-content {
        line-height: 1.6;
        overflow-wrap: break-word;
    }
    
    .assessment-form {
        background-color: #f9f9f9;
        border-radius: 8px;
        padding: 20px;
    }
    
    .radio-group {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-bottom: 20px;
    }
    
    .radio-option {
        display: flex;
        align-items: center;
        background-color: white;
        padding: 15px;
        border-radius: 5px;
        border: 1px solid #ddd;
    }
    
    .radio-option:hover {
        border-color: #007bff;
    }
    
    .radio-option label {
        margin-left: 10px;
        margin-bottom: 0;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
</style>
{% endblock %}