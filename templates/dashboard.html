{% extends "base.html" %}
{% block title %}Dashboard - CyberVantage{% endblock %}

{% block extra_styles %}
<style>
    .welcome-banner {
        /* Glass styling reused or inherited, but let's make it specific if needed */
        margin-bottom: 2rem;
        text-align: center;
    }

    .sections-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }

    .section-card {
        text-decoration: none;
        color: inherit;
        height: 100%;
        display: block;
    }

    .section-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        height: 100%;
        position: relative;
        padding: 2rem 1.75rem;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid rgba(255, 255, 255, 0.08);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
    }

    .section-content::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 16px;
        padding: 1px;
        background: linear-gradient(
            135deg,
            rgba(102, 126, 234, 0.4),
            rgba(118, 75, 162, 0.3)
        );
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        opacity: 0;
        transition: opacity 0.4s ease;
    }

    .section-content:hover {
        background: rgba(255, 255, 255, 0.04);
        transform: translateY(-8px);
        border-color: #667eea;
        box-shadow: 
            0 20px 40px rgba(0, 0, 0, 0.3),
            0 0 40px rgba(102, 126, 234, 0.25),
            inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }

    .section-content:hover::before {
        opacity: 1;
    }

    .section-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        filter: drop-shadow(0 4px 12px rgba(102, 126, 234, 0.2));
    }

    .section-content:hover .section-icon {
        transform: scale(1.1) translateY(-4px);
        filter: drop-shadow(0 8px 24px rgba(102, 126, 234, 0.45));
    }

    .current-time {
        color: rgba(255, 255, 255, 0.6);
        font-size: 0.9rem;
        margin-top: 0.5rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="glass-container welcome-banner" style="max-width: 100%;">
    <h1>Welcome to Your Dashboard</h1>
    <p class="subtitle" style="color: rgba(255,255,255,0.7);">Choose a path to enhance your cybersecurity knowledge</p>
    <p class="current-time" id="current-time">Loading...</p>
</div>

<div class="sections-container">
    <a href="{{ url_for('analysis.learn') }}" class="section-card">
        <div class="glass-panel section-content">
            <div class="section-icon">üìö</div>
            <h3>Learn</h3>
            <p>Access educational resources, tutorials, and courses on cybersecurity fundamentals and advanced topics.
            </p>
        </div>
    </a>

    <a href="{{ url_for('simulation.simulate') }}" class="section-card">
        <div class="glass-panel section-content">
            <div class="section-icon">üõ°Ô∏è</div>
            <h3>Simulate</h3>
            <p>Practice with real-world cybersecurity scenarios in a safe, controlled environment.</p>
        </div>
    </a>

    <a href="{{ url_for('analysis.analysis') }}" class="section-card">
        <div class="glass-panel section-content">
            <div class="section-icon">üìä</div>
            <h3>Analysis</h3>
            <p>Review your performance metrics, progress tracking, and personalized recommendations.</p>
        </div>
    </a>

    <a href="{{ url_for('threat.check_threats') }}" class="section-card">
        <div class="glass-panel section-content">
            <div class="section-icon">üîç</div>
            <h3>Check Threats</h3>
            <p>Scan files, URLs, and IPs to identify potential malware and security threats.</p>
        </div>
    </a>

    <a href="{{ url_for('threat.get_phishing_assignment') }}" class="section-card">
        <div class="glass-panel section-content">
            <div class="section-icon">‚úèÔ∏è</div>
            <h3>Assignment</h3>
            <p>Test your knowledge by creating a convincing phishing email and get AI feedback on your work.</p>
        </div>
    </a>

    {% if current_user and current_user.is_admin_user() %}
    <a href="{{ url_for('auth.admin_users') }}" class="section-card">
        <div class="glass-panel section-content">
            <div class="section-icon">üë•</div>
            <h3>Admin Panel</h3>
            <p>Manage system users, view registration details, and maintain user accounts.</p>
        </div>
    </a>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Update current time
        function updateTime() {
            const now = new Date();
            const formattedDate = now.toLocaleString();
            const timeEl = document.getElementById('current-time');
            if (timeEl) timeEl.textContent = `${formattedDate}`;
        }

        updateTime();
        setInterval(updateTime, 60000); // Update every minute
    });
</script>
{% endblock %}