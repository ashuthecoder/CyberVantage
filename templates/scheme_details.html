{% extends "base.html" %}
{% block title %}{{ scheme.title }} - Government Schemes{% endblock %}

{% block extra_styles %}
.scheme-detail-container {
    max-width: 800px;
    margin: 0 auto;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    overflow: hidden;
}

.scheme-header {
    background: linear-gradient(135deg, #3498db, #2c3e50);
    color: white;
    padding: 2rem;
    text-align: center;
}

.scheme-title {
    font-size: 2rem;
    margin-bottom: 1rem;
}

.scheme-meta {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
}

.meta-badge {
    background: rgba(255,255,255,0.2);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.9rem;
}

.scheme-content {
    padding: 2rem;
}

.content-section {
    margin-bottom: 2rem;
}

.content-section h3 {
    color: #2c3e50;
    border-bottom: 2px solid #3498db;
    padding-bottom: 0.5rem;
    margin-bottom: 1rem;
}

.content-section p,
.content-section ul {
    line-height: 1.6;
    color: #555;
}

.content-section ul {
    padding-left: 1.5rem;
}

.content-section li {
    margin-bottom: 0.5rem;
}

.action-buttons {
    display: flex;
    gap: 1rem;
    margin-top: 2rem;
    flex-wrap: wrap;
}

.action-btn {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    text-decoration: none;
    display: inline-block;
    text-align: center;
    font-weight: bold;
    transition: all 0.3s;
}

.btn-primary {
    background: #3498db;
    color: white;
}

.btn-primary:hover {
    background: #2980b9;
}

.btn-success {
    background: #2ecc71;
    color: white;
}

.btn-success:hover {
    background: #27ae60;
}

.btn-secondary {
    background: #95a5a6;
    color: white;
}

.btn-secondary:hover {
    background: #7f8c8d;
}

.highlight-box {
    background: #e8f4fd;
    border-left: 4px solid #3498db;
    padding: 1rem;
    margin: 1rem 0;
    border-radius: 0 4px 4px 0;
}

.warning-box {
    background: #fff3cd;
    border-left: 4px solid #ffc107;
    padding: 1rem;
    margin: 1rem 0;
    border-radius: 0 4px 4px 0;
}

.source-info {
    background: #f8f9fa;
    padding: 1rem;
    border-radius: 4px;
    margin-top: 2rem;
    font-size: 0.9rem;
    color: #6c757d;
}

.back-link {
    margin-bottom: 2rem;
    display: inline-block;
    color: #3498db;
    text-decoration: none;
}

.back-link:hover {
    text-decoration: underline;
}
{% endblock %}

{% block content %}
<a href="{{ url_for('schemes.schemes_search') }}" class="back-link">‚Üê Back to Schemes Search</a>

<div class="scheme-detail-container">
    <div class="scheme-header">
        <h1 class="scheme-title">{{ scheme.title }}</h1>
        <div class="scheme-meta">
            <span class="meta-badge">üìÇ {{ scheme.category|title }}</span>
            <span class="meta-badge">üë• {{ scheme.target_audience|title }}</span>
            {% if scheme.location %}
            <span class="meta-badge">üìç {{ scheme.location }}</span>
            {% endif %}
        </div>
    </div>
    
    <div class="scheme-content">
        <div class="content-section">
            <h3>üìã Description</h3>
            <p>{{ scheme.description }}</p>
        </div>
        
        {% if scheme.eligibility %}
        <div class="content-section">
            <h3>‚úÖ Eligibility Criteria</h3>
            <div class="highlight-box">
                {{ scheme.eligibility|safe }}
            </div>
        </div>
        {% endif %}
        
        {% if scheme.benefits %}
        <div class="content-section">
            <h3>üéÅ Benefits</h3>
            {{ scheme.benefits|safe }}
        </div>
        {% endif %}
        
        {% if scheme.how_to_apply %}
        <div class="content-section">
            <h3>üìù How to Apply</h3>
            {{ scheme.how_to_apply|safe }}
        </div>
        {% endif %}
        
        <div class="warning-box">
            <strong>‚ö†Ô∏è Important:</strong> Always verify information from official government sources before applying. This information is for guidance purposes only.
        </div>
        
        <div class="action-buttons">
            {% if scheme.official_url %}
            <a href="{{ scheme.official_url }}" target="_blank" class="action-btn btn-primary">
                üîó Visit Official Website
            </a>
            {% endif %}
            
            <a href="{{ url_for('schemes.schemes_search') }}" class="action-btn btn-secondary">
                üîç Search More Schemes
            </a>
            
            <button class="action-btn btn-success" onclick="shareScheme()">
                üì§ Share This Scheme
            </button>
        </div>
        
        {% if scheme.source_website %}
        <div class="source-info">
            <strong>Source:</strong> {{ scheme.source_website }}<br>
            <strong>Last Updated:</strong> {{ scheme.updated_at.strftime('%B %d, %Y') }}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function shareScheme() {
    if (navigator.share) {
        navigator.share({
            title: '{{ scheme.title }}',
            text: '{{ scheme.description[:100] }}...',
            url: window.location.href
        }).then(() => {
            console.log('Scheme shared successfully');
        }).catch((error) => {
            console.log('Error sharing:', error);
            fallbackShare();
        });
    } else {
        fallbackShare();
    }
}

function fallbackShare() {
    const url = window.location.href;
    const title = '{{ scheme.title }}';
    
    if (navigator.clipboard) {
        navigator.clipboard.writeText(`${title} - ${url}`).then(() => {
            alert('Scheme link copied to clipboard!');
        }).catch(() => {
            prompt('Copy this link:', url);
        });
    } else {
        prompt('Copy this link:', url);
    }
}
</script>
{% endblock %}